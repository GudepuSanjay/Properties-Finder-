{% extends 'base.html' %}
{% block content %}
<div class="max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-md">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">Update Your Profile</h2>
    
    <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}
        
        <!-- User Form Section -->
        <div class="space-y-4">
            <h3 class="text-xl font-semibold text-gray-700 border-b pb-2">Account Information</h3>
            {% for field in user_form %}
            <div class="flex flex-col">
                <label for="{{ field.id_for_label }}" class="text-sm font-medium text-gray-600 mb-1">
                    {{ field.label }}
                    {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                </label>
                {{ field }}
                {% if field.help_text %}
                <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
                {% endif %}
                {% for error in field.errors %}
                <p class="text-xs text-red-500 mt-1">{{ error }}</p>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        
        <!-- Profile Form Section -->
        <div class="space-y-4">
            <h3 class="text-xl font-semibold text-gray-700 border-b pb-2">Profile Details</h3>
            {% for field in profile_form %}
            <div class="flex flex-col">
                <label for="{{ field.id_for_label }}" class="text-sm font-medium text-gray-600 mb-1">
                    {{ field.label }}
                    {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                </label>
                {% if field.name == 'profile_picture' and field.value %}
                <div class="flex items-center space-x-4 mb-2">
                    <img src="{{ field.value.url }}" alt="Current profile picture" class="w-16 h-16 rounded-full object-cover">
                    <label class="cursor-pointer">
                        <span class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition duration-200">Change Photo</span>
                        <input type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="hidden">
                    </label>
                </div>
                {% else %}
                    {{ field }}
                {% endif %}
                {% if field.help_text %}
                <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
                {% endif %}
                {% for error in field.errors %}
                <p class="text-xs text-red-500 mt-1">{{ error }}</p>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        
        <div class="pt-4">
            <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition duration-200">
                Update Profile
            </button>
        </div>
    </form>
</div>

<style>
    input[type="text"], 
    input[type="email"], 
    input[type="password"], 
    input[type="file"],
    textarea, select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        background-color: #f8fafc;
        transition: all 0.2s;
    }
    
    input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: #93c5fd;
        box-shadow: 0 0 0 3px rgba(147, 197, 253, 0.3);
        background-color: white;
    }
    
    .errorlist {
        color: #ef4444;
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
</style>
{% endblock %}